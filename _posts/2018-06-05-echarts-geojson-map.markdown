---
layout:     post
title:      "Echarts加载geoJson数据,实现省市联动"
subtitle:   "微信分享"
date:       2018-06-05
author:     "Joubn"
header-img: "img/contact-bg.jpg"
header-mask: 0.3
catalog: true
tags:
    -js
---

> “He who seize the right moment, is the right man. ”

## 序言

这两年数据可视化被越来越多的人提起。主要原因还是大数据的兴起。那我们免不了要用一些数据可视化组件了。主要有[d3](https://d3js.org/)、[highcharts](https://www.highcharts.com/)、[echarts](http://echarts.baidu.com/).
这里我主要想聊一下`echarts`加载`geoJson`地图数据的实现

### 认识geoJson

>GeoJSON是一种对各种地理数据结构进行编码的格式，基于Javascript对象表示法的地理空间信息数据交换格式。GeoJSON对象可以表示几何、特征或者特征集合。GeoJSON支持下面几何类型：点、线、面、多点、多线、多面和几何集合。GeoJSON里的特征包含一个几何对象和其他属性，特征集合表示一系列特征。

这里官方的解释，我们先来看一下庐山真面目：

```json
{
  "type": "Feature",
  "geometry": {
    "type": "Point",
    "coordinates": [125.6, 10.1]
  },
  "properties": {
    "name": "Dinagat Islands"
  }
}
```

了解更多：[geojson](http://geojson.org/)官网

### Echarts加载geoJson数据

你看完上面可能你会想，什么鬼，我要这数据有什么用。这个可是非常有用的。有了这个数据就可以转成`topojson`在D3里用了或者转成SVG放浏览器里直观感受了。

这里我先准备一份图家-省份-市区的geojson的数据[省市geojson](http://static.joubn.com/2018-06-05-echarts-geojson-map/mapdata.rar).
有了这份数据我们就可以通过echarts轻松把地图信息展示到页面上去了。

示例：
<iframe frameborder="0" width="100%" height="400px" src="http://static.joubn.com/2018-06-05-echarts-geojson-map/index.html"></iframe>

js代码：
```js
    (function(echarts) {
        var map = echarts.init(document.getElementById('map'))
        var reset = function() {
            map = echarts.init(document.getElementById('map'))
            map.setOption({
                geo: {
                    map: 'mapCity',
                    label: {
                        emphasis: {
                            show: true,
                            color: '#fff',
                        }
                    },
                    roam: true, //允许拖动
                    itemStyle: {
                        normal: {
                            areaColor: '#00405b',
                            borderColor: '#02334a',
                            borderWidth: 1,
                            shadowColor: 'rgba(0, 189, 249, 0.5)',
                            shadowBlur: 2,
                            shadowOffsetY: 0,
                            shadowOffsetX: 0,
                        },
                        emphasis: {
                            areaColor: '#006387'
                        }
                    }
                }
            })
        }



        var level = 1
        var country = function(){
            level = 1
            $.ajax({
                url: 'mapdata/china.json',
                type: 'get',
                success: function(res) {
                   echarts.registerMap("mapCity", res);
                    map.dispose()
                    reset() 
                    map.on('click', (params) => {
                        const provinceCode=JSON.parse(res).features.filter((val) => {
                            if(val.properties.name.indexOf(params.name)!==-1){
                                return true
                            }
                        });
                        province(provinceCode[0].properties.id,params.name)

                    });
                }
            })
        }

        var province = function(id,name){
            level = 2
            $.ajax({
                url: 'mapdata/geometryProvince/'+id+'.json',
                type: 'get',
                success: function(res) {
                   echarts.registerMap("mapCity", res);
                   map.dispose()
                    reset() 
                    map.on('click', (params) => {
                        const provinceCode=JSON.parse(res).features.filter((val) => {
                            if(val.properties.name.indexOf(params.name)!==-1){
                                return true
                            }
                        });

                        city(provinceCode[0].properties.id,params.name)
                    });
                }
            })
        }
        var city = function(id,name){
            level = 3
            $.ajax({
                url: 'mapdata/geometryCouties/'+id+'00.json',
                type: 'get',
                success: function(res) {
                    echarts.registerMap("mapCity", res);
                    map.dispose()
                    reset() 
                    map.on('click', (params) => {
                        alert(params.name)
                    });
                }
            })
        }
        country()

    })(echarts)
    
```

html代码：
```html
<div id="map"></div>
```


### svg转geoJson

是的，看到这里你可能还在想，这个geoJson这么好用那怎么去写出来呀，这么一大坨。是的让我手写也不可能。但是SVG会画吧，我们可以直接画好SVG然后再转成我们想要的geoJson数据。当然SVG本身也是很好用的。在d3里体现的淋漓尽致。
这里我用的工具是[SVG 2 GeoJSON](https://github.com/Phrogz/svg2geojson)

示例：

svg:

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="图层_1" x="0px" y="0px" width="1200px" height="600px" viewBox="0 0 800 600" enable-background="new 0 0 800 600" xml:space="preserve" style="width: 100%;height: 100%;">
	<path d="M-33.52,392.276c0,19.539-4.147,33.977-12.442,43.316c-8.294,9.338-20.431,14.009-36.404,14.009   c-10.815,0-20.155-0.553-28.018-1.658v-29.124c3.318,0.613,7.065,0.922,11.244,0.922c8.848,0,14.898-2.612,18.156-7.834   c3.255-5.225,4.885-13.119,4.885-23.686V187.858h42.58V392.276z M-76.1,145.095v-36.312h42.395v36.312H-76.1z"/>
	<path d="M204.445,281.865c0,30.846-8.571,54.993-25.713,72.44c-17.143,17.448-41.197,26.175-72.164,26.175   c-29.985,0-53.455-8.848-70.413-26.543s-25.437-41.718-25.437-72.072c0-30.843,8.508-54.866,25.529-72.071   c17.019-17.203,40.828-25.806,71.426-25.806c31.581,0,55.604,8.387,72.072,25.161C196.211,225.922,204.445,250.161,204.445,281.865   z M160.022,281.865c0-44.359-17.142-66.542-51.427-66.542c-35.639,0-53.455,22.183-53.455,66.542   c0,21.75,4.36,38.404,13.087,49.953c8.724,11.552,21.382,17.326,37.971,17.326C142.08,349.144,160.022,326.72,160.022,281.865z"/>
	<path d="M288.129,187.858v105.619c0,19.17,3.01,32.934,9.032,41.289c6.019,8.358,15.42,12.534,28.202,12.534   c13.761,0,24.7-5.253,32.81-15.76s12.166-25.161,12.166-43.962v-99.721h42.395v145.249c0,14.746,0.553,29.309,1.659,43.686h-40.368   c-1.354-18.678-2.027-30.843-2.027-36.497h-0.737c-7.373,14.502-15.884,24.821-25.529,30.968   c-9.648,6.143-22.027,9.216-37.142,9.216c-20.893,0-36.589-6.238-47.096-18.709c-10.506-12.471-15.76-31.612-15.76-57.418V187.858   H288.129z"/>
	<path d="M651.806,281.312c0,31.335-7.097,55.637-21.29,72.901s-34.256,25.898-60.183,25.898c-27.896,0-47.619-11.429-59.169-34.285   h-0.737c0,10.322-0.737,20.645-2.212,30.967h-41.289c1.106-11.428,1.659-25.497,1.659-42.211V108.783h42.396v81.656   c0,4.917-0.063,9.801-0.185,14.654c-0.124,4.855-0.309,9.616-0.553,14.285h0.737c5.774-11.428,13.576-20.212,23.409-26.359   c9.83-6.143,22.732-9.216,38.708-9.216c25.189,0,44.607,8.45,58.247,25.345C644.985,226.046,651.806,250.1,651.806,281.312z    M607.567,281.312c0-44.359-15.607-66.542-46.819-66.542c-16.589,0-29.155,5.838-37.694,17.511   c-8.543,11.676-12.811,28.51-12.811,50.505c0,21.505,4.176,37.971,12.534,49.399c8.354,11.429,20.889,17.143,37.603,17.143   C591.836,349.328,607.567,326.656,607.567,281.312z"/>
	<path d="M820.279,376.793V271.174c0-19.17-2.981-32.931-8.94-41.289c-5.962-8.355-15.391-12.534-28.294-12.534   c-13.888,0-24.792,5.346-32.718,16.037s-11.889,25.192-11.889,43.501v99.905h-42.396V231.359c0-14.622-0.553-29.124-1.659-43.501   h40.368c1.351,18.433,2.027,30.598,2.027,36.497h0.737c7.249-14.129,15.668-24.392,25.253-30.782   c9.585-6.388,21.935-9.585,37.049-9.585c21.014,0,36.773,6.207,47.28,18.617c10.507,12.414,15.76,31.583,15.76,57.51v116.679   H820.279z"/>
</svg>

可拖拽、缩放（兼容手机）：

<script type="text/javascript" src="http://static.joubn.com/2018-06-05-echarts-geojson-map/echarts.min.js"></script>
<div id="demo" style="width: 100%;height: 500px;">
    </div>
    <script type="text/javascript">
    (function(echarts) {
        var map = echarts.init(document.getElementById('demo'))
        var reset = function() {
            map = echarts.init(document.getElementById('demo'))
            map.setOption({
                geo: {
                    map: 'mapCity',
                    label: {
                        emphasis: {
                            show: true,
                            color: '#fff',
                        }
                    },
                    roam: true, //允许拖动
                    itemStyle: {
                        normal: {
                            areaColor: '#00405b',
                            borderColor: '#02334a',
                            borderWidth: 1,
                            shadowColor: 'rgba(0, 189, 249, 0.5)',
                            shadowBlur: 2,
                            shadowOffsetY: 0,
                            shadowOffsetX: 0,
                        },
                        emphasis: {
                            areaColor: '#006387'
                        }
                    }
                }
            })
        }

        var res = {
 "type"    : "FeatureCollection",
 "creator" : "svg2geojson v0.7.0",
 "features": [
  {
   "type"      : "Feature",
   "properties": null,
   "geometry"  : {
    "type"       : "Polygon",
    "coordinates": [
     [
      [-121.972587,37.371633],
      [-121.972587,37.371633],
      [-121.972587,37.373145],
      [-121.972982,37.373145],
      [-121.972982,37.371663],
      [-121.972982,37.371648],
      [-121.972984,37.371621],
      [-121.972987,37.371595],
      [-121.972991,37.371571],
      [-121.972996,37.371549],
      [-121.973003,37.371529],
      [-121.973012,37.371511],
      [-121.973022,37.371495],
      [-121.973027,37.371487],
      [-121.973033,37.371480],
      [-121.973047,37.371468],
      [-121.973063,37.371457],
      [-121.973082,37.371448],
      [-121.973103,37.371440],
      [-121.973126,37.371435],
      [-121.973152,37.371431],
      [-121.973181,37.371430],
      [-121.973196,37.371429],
      [-121.973210,37.371429],
      [-121.973238,37.371430],
      [-121.973264,37.371432],
      [-121.973288,37.371435],
      [-121.973300,37.371436],
      [-121.973300,37.371221],
      [-121.973272,37.371218],
      [-121.973212,37.371213],
      [-121.973147,37.371210],
      [-121.973077,37.371209],
      [-121.973040,37.371208],
      [-121.973026,37.371208],
      [-121.972999,37.371209],
      [-121.972973,37.371211],
      [-121.972948,37.371213],
      [-121.972924,37.371217],
      [-121.972900,37.371221],
      [-121.972877,37.371225],
      [-121.972855,37.371231],
      [-121.972834,37.371238],
      [-121.972814,37.371245],
      [-121.972795,37.371253],
      [-121.972776,37.371262],
      [-121.972758,37.371272],
      [-121.972741,37.371282],
      [-121.972725,37.371294],
      [-121.972710,37.371306],
      [-121.972703,37.371312],
      [-121.972696,37.371319],
      [-121.972682,37.371332],
      [-121.972669,37.371347],
      [-121.972658,37.371363],
      [-121.972647,37.371379],
      [-121.972637,37.371397],
      [-121.972628,37.371415],
      [-121.972620,37.371434],
      [-121.972613,37.371454],
      [-121.972606,37.371475],
      [-121.972601,37.371497],
      [-121.972597,37.371520],
      [-121.972593,37.371543],
      [-121.972590,37.371568],
      [-121.972588,37.371593],
      [-121.972587,37.371619],
      [-121.972587,37.371633]
     ],
     [[-121.972982,37.373462],[-121.972982,37.373731],[-121.972589,37.373731],[-121.972589,37.373462],[-121.972982,37.373462],[-121.972982,37.373462]]
    ]
   }
  },
  {
   "type"      : "Feature",
   "properties": null,
   "geometry"  : {
    "type"       : "Polygon",
    "coordinates": [
     [
      [-121.970381,37.372450],
      [-121.970381,37.372450],
      [-121.970382,37.372472],
      [-121.970384,37.372514],
      [-121.970387,37.372556],
      [-121.970392,37.372596],
      [-121.970400,37.372635],
      [-121.970409,37.372672],
      [-121.970419,37.372708],
      [-121.970432,37.372743],
      [-121.970446,37.372777],
      [-121.970462,37.372809],
      [-121.970480,37.372840],
      [-121.970500,37.372870],
      [-121.970521,37.372898],
      [-121.970544,37.372926],
      [-121.970570,37.372951],
      [-121.970596,37.372976],
      [-121.970610,37.372988],
      [-121.970625,37.372999],
      [-121.970655,37.373021],
      [-121.970687,37.373041],
      [-121.970721,37.373060],
      [-121.970756,37.373078],
      [-121.970793,37.373094],
      [-121.970831,37.373108],
      [-121.970871,37.373121],
      [-121.970913,37.373133],
      [-121.970956,37.373143],
      [-121.971001,37.373152],
      [-121.971048,37.373159],
      [-121.971096,37.373165],
      [-121.971146,37.373169],
      [-121.971198,37.373172],
      [-121.971251,37.373174],
      [-121.971279,37.373174],
      [-121.971305,37.373174],
      [-121.971357,37.373172],
      [-121.971407,37.373169],
      [-121.971456,37.373165],
      [-121.971503,37.373159],
      [-121.971549,37.373151],
      [-121.971593,37.373142],
      [-121.971636,37.373132],
      [-121.971677,37.373120],
      [-121.971717,37.373107],
      [-121.971756,37.373092],
      [-121.971793,37.373075],
      [-121.971828,37.373057],
      [-121.971862,37.373038],
      [-121.971895,37.373017],
      [-121.971926,37.372995],
      [-121.971941,37.372983],
      [-121.971955,37.372971],
      [-121.971983,37.372946],
      [-121.972009,37.372920],
      [-121.972033,37.372892],
      [-121.972055,37.372864],
      [-121.972075,37.372834],
      [-121.972094,37.372803],
      [-121.972111,37.372771],
      [-121.972125,37.372737],
      [-121.972138,37.372703],
      [-121.972149,37.372667],
      [-121.972159,37.372630],
      [-121.972166,37.372592],
      [-121.972172,37.372553],
      [-121.972175,37.372513],
      [-121.972177,37.372471],
      [-121.972177,37.372450],
      [-121.972177,37.372429],
      [-121.972175,37.372388],
      [-121.972172,37.372348],
      [-121.972166,37.372309],
      [-121.972159,37.372271],
      [-121.972149,37.372235],
      [-121.972138,37.372199],
      [-121.972125,37.372165],
      [-121.972111,37.372131],
      [-121.972094,37.372099],
      [-121.972076,37.372068],
      [-121.972055,37.372038],
      [-121.972033,37.372009],
      [-121.972009,37.371981],
      [-121.971984,37.371954],
      [-121.971956,37.371929],
      [-121.971942,37.371916],
      [-121.971927,37.371904],
      [-121.971896,37.371881],
      [-121.971863,37.371860],
      [-121.971830,37.371840],
      [-121.971795,37.371821],
      [-121.971758,37.371804],
      [-121.971720,37.371789],
      [-121.971681,37.371775],
      [-121.971640,37.371763],
      [-121.971598,37.371752],
      [-121.971554,37.371743],
      [-121.971509,37.371735],
      [-121.971463,37.371729],
      [-121.971415,37.371725],
      [-121.971365,37.371722],
      [-121.971315,37.371720],
      [-121.971289,37.371720],
      [-121.971262,37.371720],
      [-121.971210,37.371722],
      [-121.971159,37.371725],
      [-121.971110,37.371729],
      [-121.971062,37.371735],
      [-121.971015,37.371743],
      [-121.970971,37.371752],
      [-121.970927,37.371762],
      [-121.970886,37.371775],
      [-121.970845,37.371788],
      [-121.970806,37.371803],
      [-121.970769,37.371820],
      [-121.970733,37.371838],
      [-121.970699,37.371858],
      [-121.970666,37.371879],
      [-121.970635,37.371902],
      [-121.970620,37.371914],
      [-121.970605,37.371926],
      [-121.970577,37.371951],
      [-121.970551,37.371978],
      [-121.970527,37.372005],
      [-121.970505,37.372034],
      [-121.970484,37.372064],
      [-121.970466,37.372095],
      [-121.970449,37.372128],
      [-121.970434,37.372161],
      [-121.970421,37.372196],
      [-121.970410,37.372232],
      [-121.970400,37.372269],
      [-121.970393,37.372307],
      [-121.970387,37.372346],
      [-121.970384,37.372387],
      [-121.970382,37.372428],
      [-121.970381,37.372450]
     ],
     [
      [-121.970793,37.372450],
      [-121.970793,37.372450],
      [-121.970793,37.372434],
      [-121.970794,37.372404],
      [-121.970796,37.372375],
      [-121.970799,37.372347],
      [-121.970803,37.372319],
      [-121.970808,37.372293],
      [-121.970814,37.372268],
      [-121.970821,37.372244],
      [-121.970828,37.372220],
      [-121.970837,37.372198],
      [-121.970847,37.372177],
      [-121.970858,37.372156],
      [-121.970869,37.372137],
      [-121.970882,37.372118],
      [-121.970896,37.372101],
      [-121.970910,37.372084],
      [-121.970926,37.372069],
      [-121.970943,37.372054],
      [-121.970960,37.372040],
      [-121.970979,37.372028],
      [-121.970998,37.372016],
      [-121.971019,37.372005],
      [-121.971040,37.371996],
      [-121.971062,37.371987],
      [-121.971086,37.371979],
      [-121.971110,37.371972],
      [-121.971135,37.371966],
      [-121.971162,37.371962],
      [-121.971189,37.371958],
      [-121.971217,37.371955],
      [-121.971247,37.371953],
      [-121.971277,37.371952],
      [-121.971292,37.371952],
      [-121.971307,37.371952],
      [-121.971335,37.371953],
      [-121.971362,37.371955],
      [-121.971388,37.371958],
      [-121.971413,37.371962],
      [-121.971438,37.371967],
      [-121.971462,37.371973],
      [-121.971484,37.371980],
      [-121.971506,37.371988],
      [-121.971528,37.371997],
      [-121.971548,37.372007],
      [-121.971567,37.372018],
      [-121.971586,37.372030],
      [-121.971604,37.372043],
      [-121.971621,37.372057],
      [-121.971637,37.372072],
      [-121.971644,37.372080],
      [-121.971652,37.372088],
      [-121.971666,37.372105],
      [-121.971679,37.372123],
      [-121.971691,37.372142],
      [-121.971703,37.372161],
      [-121.971713,37.372182],
      [-121.971723,37.372203],
      [-121.971731,37.372225],
      [-121.971739,37.372248],
      [-121.971746,37.372272],
      [-121.971751,37.372297],
      [-121.971756,37.372323],
      [-121.971760,37.372349],
      [-121.971763,37.372377],
      [-121.971764,37.372405],
      [-121.971765,37.372435],
      [-121.971766,37.372450],
      [-121.971765,37.372465],
      [-121.971764,37.372495],
      [-121.971762,37.372524],
      [-121.971760,37.372552],
      [-121.971756,37.372578],
      [-121.971751,37.372604],
      [-121.971745,37.372629],
      [-121.971738,37.372653],
      [-121.971731,37.372677],
      [-121.971722,37.372699],
      [-121.971712,37.372720],
      [-121.971702,37.372740],
      [-121.971690,37.372759],
      [-121.971677,37.372778],
      [-121.971664,37.372795],
      [-121.971649,37.372811],
      [-121.971634,37.372827],
      [-121.971617,37.372841],
      [-121.971600,37.372854],
      [-121.971582,37.372867],
      [-121.971562,37.372879],
      [-121.971542,37.372889],
      [-121.971521,37.372899],
      [-121.971498,37.372907],
      [-121.971475,37.372915],
      [-121.971451,37.372922],
      [-121.971426,37.372928],
      [-121.971400,37.372932],
      [-121.971372,37.372936],
      [-121.971344,37.372939],
      [-121.971315,37.372941],
      [-121.971285,37.372942],
      [-121.971270,37.372942],
      [-121.971255,37.372942],
      [-121.971226,37.372941],
      [-121.971198,37.372939],
      [-121.971171,37.372936],
      [-121.971145,37.372932],
      [-121.971120,37.372928],
      [-121.971096,37.372922],
      [-121.971073,37.372915],
      [-121.971050,37.372907],
      [-121.971029,37.372899],
      [-121.971008,37.372889],
      [-121.970989,37.372879],
      [-121.970970,37.372867],
      [-121.970953,37.372854],
      [-121.970936,37.372841],
      [-121.970920,37.372827],
      [-121.970905,37.372811],
      [-121.970891,37.372795],
      [-121.970878,37.372778],
      [-121.970866,37.372759],
      [-121.970855,37.372740],
      [-121.970845,37.372720],
      [-121.970835,37.372699],
      [-121.970827,37.372677],
      [-121.970819,37.372653],
      [-121.970813,37.372629],
      [-121.970807,37.372604],
      [-121.970803,37.372578],
      [-121.970799,37.372552],
      [-121.970796,37.372524],
      [-121.970794,37.372495],
      [-121.970793,37.372465],
      [-121.970793,37.372450]
     ]
    ]
   }
  },
  {
   "type"      : "Feature",
   "properties": null,
   "geometry"  : {
    "type"       : "Polygon",
    "coordinates": [
     [
      [-121.969606,37.373145],
      [-121.969606,37.373145],
      [-121.969999,37.373145],
      [-121.969999,37.372283],
      [-121.969999,37.372266],
      [-121.969997,37.372231],
      [-121.969995,37.372197],
      [-121.969992,37.372165],
      [-121.969987,37.372134],
      [-121.969981,37.372104],
      [-121.969975,37.372075],
      [-121.969967,37.372047],
      [-121.969958,37.372021],
      [-121.969947,37.371995],
      [-121.969936,37.371971],
      [-121.969923,37.371948],
      [-121.969910,37.371926],
      [-121.969895,37.371905],
      [-121.969879,37.371886],
      [-121.969862,37.371867],
      [-121.969853,37.371858],
      [-121.969843,37.371850],
      [-121.969824,37.371834],
      [-121.969803,37.371818],
      [-121.969782,37.371804],
      [-121.969759,37.371791],
      [-121.969735,37.371780],
      [-121.969710,37.371769],
      [-121.969684,37.371759],
      [-121.969657,37.371750],
      [-121.969628,37.371743],
      [-121.969599,37.371736],
      [-121.969568,37.371731],
      [-121.969536,37.371727],
      [-121.969503,37.371723],
      [-121.969469,37.371721],
      [-121.969434,37.371720],
      [-121.969416,37.371720],
      [-121.969390,37.371720],
      [-121.969340,37.371722],
      [-121.969292,37.371727],
      [-121.969247,37.371733],
      [-121.969204,37.371741],
      [-121.969163,37.371752],
      [-121.969134,37.371762],
      [-121.969116,37.371768],
      [-121.969098,37.371776],
      [-121.969080,37.371784],
      [-121.969072,37.371788],
      [-121.969063,37.371792],
      [-121.969047,37.371802],
      [-121.969031,37.371812],
      [-121.969015,37.371822],
      [-121.968991,37.371840],
      [-121.968960,37.371866],
      [-121.968931,37.371894],
      [-121.968902,37.371926],
      [-121.968875,37.371960],
      [-121.968848,37.371998],
      [-121.968835,37.372017],
      [-121.968828,37.372017],
      [-121.968828,37.371999],
      [-121.968826,37.371950],
      [-121.968821,37.371882],
      [-121.968814,37.371797],
      [-121.968810,37.371747],
      [-121.968435,37.371747],
      [-121.968439,37.371787],
      [-121.968445,37.371867],
      [-121.968449,37.371948],
      [-121.968450,37.372030],
      [-121.968451,37.372070],
      [-121.968451,37.373145],
      [-121.968844,37.373145],
      [-121.968844,37.372407],
      [-121.968844,37.372394],
      [-121.968845,37.372369],
      [-121.968846,37.372344],
      [-121.968849,37.372320],
      [-121.968853,37.372297],
      [-121.968857,37.372275],
      [-121.968862,37.372253],
      [-121.968868,37.372232],
      [-121.968876,37.372212],
      [-121.968883,37.372192],
      [-121.968892,37.372173],
      [-121.968902,37.372155],
      [-121.968913,37.372137],
      [-121.968924,37.372121],
      [-121.968936,37.372105],
      [-121.968950,37.372089],
      [-121.968956,37.372082],
      [-121.968964,37.372075],
      [-121.968978,37.372061],
      [-121.968994,37.372048],
      [-121.969010,37.372037],
      [-121.969026,37.372026],
      [-121.969043,37.372016],
      [-121.969061,37.372007],
      [-121.969079,37.371998],
      [-121.969098,37.371991],
      [-121.969118,37.371985],
      [-121.969138,37.371979],
      [-121.969159,37.371975],
      [-121.969181,37.371971],
      [-121.969203,37.371968],
      [-121.969225,37.371966],
      [-121.969249,37.371966],
      [-121.969261,37.371965],
      [-121.969272,37.371966],
      [-121.969293,37.371966],
      [-121.969314,37.371968],
      [-121.969334,37.371970],
      [-121.969353,37.371973],
      [-121.969372,37.371976],
      [-121.969389,37.371981],
      [-121.969407,37.371986],
      [-121.969423,37.371992],
      [-121.969439,37.371998],
      [-121.969453,37.372005],
      [-121.969468,37.372013],
      [-121.969481,37.372022],
      [-121.969494,37.372031],
      [-121.969506,37.372042],
      [-121.969517,37.372052],
      [-121.969522,37.372058],
      [-121.969527,37.372064],
      [-121.969537,37.372077],
      [-121.969546,37.372090],
      [-121.969555,37.372105],
      [-121.969563,37.372120],
      [-121.969570,37.372136],
      [-121.969576,37.372153],
      [-121.969582,37.372172],
      [-121.969587,37.372191],
      [-121.969592,37.372211],
      [-121.969598,37.372242],
      [-121.969603,37.372288],
      [-121.969605,37.372338],
      [-121.969606,37.372364],
      [-121.969606,37.373145]
     ]
    ]
   }
  },
  {
   "type"      : "Feature",
   "properties": null,
   "geometry"  : {
    "type"       : "Polygon",
    "coordinates": [
     [
      [-121.966235,37.372454],
      [-121.966235,37.372454],
      [-121.966235,37.372475],
      [-121.966236,37.372517],
      [-121.966239,37.372558],
      [-121.966244,37.372598],
      [-121.966250,37.372636],
      [-121.966257,37.372673],
      [-121.966266,37.372709],
      [-121.966276,37.372744],
      [-121.966288,37.372777],
      [-121.966301,37.372809],
      [-121.966316,37.372840],
      [-121.966333,37.372870],
      [-121.966350,37.372898],
      [-121.966370,37.372925],
      [-121.966390,37.372951],
      [-121.966413,37.372976],
      [-121.966424,37.372988],
      [-121.966436,37.372999],
      [-121.966461,37.373021],
      [-121.966487,37.373042],
      [-121.966515,37.373061],
      [-121.966544,37.373078],
      [-121.966574,37.373095],
      [-121.966605,37.373109],
      [-121.966637,37.373122],
      [-121.966671,37.373134],
      [-121.966706,37.373144],
      [-121.966742,37.373153],
      [-121.966780,37.373161],
      [-121.966819,37.373166],
      [-121.966859,37.373171],
      [-121.966900,37.373174],
      [-121.966942,37.373175],
      [-121.966964,37.373175],
      [-121.966992,37.373175],
      [-121.967044,37.373173],
      [-121.967095,37.373169],
      [-121.967142,37.373162],
      [-121.967187,37.373154],
      [-121.967219,37.373146],
      [-121.967239,37.373140],
      [-121.967259,37.373134],
      [-121.967278,37.373127],
      [-121.967297,37.373119],
      [-121.967314,37.373111],
      [-121.967323,37.373107],
      [-121.967340,37.373098],
      [-121.967372,37.373080],
      [-121.967403,37.373059],
      [-121.967432,37.373036],
      [-121.967459,37.373012],
      [-121.967484,37.372986],
      [-121.967508,37.372958],
      [-121.967530,37.372928],
      [-121.967540,37.372912],
      [-121.967547,37.372912],
      [-121.967545,37.372938],
      [-121.967543,37.372991],
      [-121.967542,37.373018],
      [-121.967541,37.373045],
      [-121.967540,37.373099],
      [-121.967540,37.373126],
      [-121.967540,37.373731],
      [-121.967933,37.373731],
      [-121.967933,37.372060],
      [-121.967933,37.372014],
      [-121.967935,37.371929],
      [-121.967939,37.371851],
      [-121.967945,37.371780],
      [-121.967948,37.371747],
      [-121.967566,37.371747],
      [-121.967561,37.371776],
      [-121.967553,37.371833],
      [-121.967548,37.371890],
      [-121.967545,37.371948],
      [-121.967545,37.371976],
      [-121.967538,37.371976],
      [-121.967528,37.371961],
      [-121.967506,37.371931],
      [-121.967483,37.371903],
      [-121.967457,37.371877],
      [-121.967430,37.371854],
      [-121.967401,37.371832],
      [-121.967370,37.371812],
      [-121.967338,37.371794],
      [-121.967303,37.371778],
      [-121.967267,37.371764],
      [-121.967230,37.371753],
      [-121.967190,37.371743],
      [-121.967149,37.371735],
      [-121.967105,37.371729],
      [-121.967060,37.371725],
      [-121.967014,37.371723],
      [-121.966990,37.371723],
      [-121.966967,37.371723],
      [-121.966924,37.371724],
      [-121.966881,37.371727],
      [-121.966840,37.371732],
      [-121.966800,37.371738],
      [-121.966761,37.371745],
      [-121.966724,37.371754],
      [-121.966688,37.371765],
      [-121.966653,37.371777],
      [-121.966619,37.371790],
      [-121.966587,37.371805],
      [-121.966556,37.371822],
      [-121.966526,37.371840],
      [-121.966498,37.371859],
      [-121.966470,37.371880],
      [-121.966444,37.371902],
      [-121.966432,37.371914],
      [-121.966420,37.371926],
      [-121.966397,37.371952],
      [-121.966375,37.371978],
      [-121.966355,37.372006],
      [-121.966336,37.372034],
      [-121.966320,37.372064],
      [-121.966304,37.372096],
      [-121.966290,37.372128],
      [-121.966278,37.372162],
      [-121.966267,37.372197],
      [-121.966258,37.372233],
      [-121.966250,37.372270],
      [-121.966244,37.372309],
      [-121.966239,37.372349],
      [-121.966236,37.372390],
      [-121.966235,37.372432],
      [-121.966235,37.372454]
     ],
     [
      [-121.966645,37.372454],
      [-121.966645,37.372454],
      [-121.966645,37.372438],
      [-121.966646,37.372408],
      [-121.966647,37.372378],
      [-121.966650,37.372350],
      [-121.966653,37.372322],
      [-121.966658,37.372296],
      [-121.966663,37.372270],
      [-121.966669,37.372245],
      [-121.966675,37.372222],
      [-121.966683,37.372199],
      [-121.966692,37.372178],
      [-121.966701,37.372157],
      [-121.966711,37.372137],
      [-121.966722,37.372119],
      [-121.966734,37.372101],
      [-121.966747,37.372084],
      [-121.966761,37.372069],
      [-121.966775,37.372054],
      [-121.966791,37.372040],
      [-121.966807,37.372027],
      [-121.966824,37.372015],
      [-121.966842,37.372005],
      [-121.966861,37.371995],
      [-121.966881,37.371986],
      [-121.966901,37.371978],
      [-121.966922,37.371971],
      [-121.966945,37.371965],
      [-121.966968,37.371960],
      [-121.966992,37.371956],
      [-121.967016,37.371953],
      [-121.967042,37.371952],
      [-121.967068,37.371951],
      [-121.967082,37.371950],
      [-121.967096,37.371951],
      [-121.967125,37.371952],
      [-121.967152,37.371954],
      [-121.967178,37.371956],
      [-121.967204,37.371960],
      [-121.967228,37.371965],
      [-121.967252,37.371971],
      [-121.967274,37.371978],
      [-121.967296,37.371986],
      [-121.967317,37.371995],
      [-121.967337,37.372005],
      [-121.967356,37.372016],
      [-121.967374,37.372028],
      [-121.967391,37.372041],
      [-121.967408,37.372055],
      [-121.967423,37.372069],
      [-121.967431,37.372077],
      [-121.967438,37.372085],
      [-121.967451,37.372102],
      [-121.967464,37.372120],
      [-121.967476,37.372138],
      [-121.967487,37.372157],
      [-121.967497,37.372178],
      [-121.967506,37.372199],
      [-121.967514,37.372221],
      [-121.967521,37.372244],
      [-121.967528,37.372267],
      [-121.967533,37.372292],
      [-121.967538,37.372317],
      [-121.967541,37.372344],
      [-121.967544,37.372371],
      [-121.967546,37.372399],
      [-121.967547,37.372428],
      [-121.967547,37.372443],
      [-121.967547,37.372458],
      [-121.967546,37.372488],
      [-121.967544,37.372516],
      [-121.967541,37.372544],
      [-121.967537,37.372571],
      [-121.967533,37.372597],
      [-121.967527,37.372622],
      [-121.967521,37.372647],
      [-121.967513,37.372670],
      [-121.967505,37.372692],
      [-121.967496,37.372714],
      [-121.967485,37.372735],
      [-121.967474,37.372754],
      [-121.967462,37.372773],
      [-121.967449,37.372791],
      [-121.967435,37.372808],
      [-121.967428,37.372817],
      [-121.967421,37.372825],
      [-121.967405,37.372840],
      [-121.967388,37.372854],
      [-121.967371,37.372867],
      [-121.967352,37.372879],
      [-121.967333,37.372890],
      [-121.967313,37.372901],
      [-121.967292,37.372910],
      [-121.967270,37.372918],
      [-121.967248,37.372925],
      [-121.967224,37.372931],
      [-121.967200,37.372936],
      [-121.967174,37.372940],
      [-121.967148,37.372943],
      [-121.967121,37.372945],
      [-121.967093,37.372946],
      [-121.967079,37.372946],
      [-121.967065,37.372946],
      [-121.967039,37.372945],
      [-121.967013,37.372943],
      [-121.966989,37.372940],
      [-121.966965,37.372936],
      [-121.966942,37.372932],
      [-121.966920,37.372926],
      [-121.966899,37.372919],
      [-121.966879,37.372911],
      [-121.966859,37.372903],
      [-121.966841,37.372893],
      [-121.966823,37.372883],
      [-121.966806,37.372871],
      [-121.966790,37.372859],
      [-121.966774,37.372845],
      [-121.966760,37.372831],
      [-121.966746,37.372815],
      [-121.966734,37.372799],
      [-121.966722,37.372782],
      [-121.966711,37.372763],
      [-121.966701,37.372744],
      [-121.966691,37.372724],
      [-121.966683,37.372703],
      [-121.966675,37.372681],
      [-121.966668,37.372658],
      [-121.966663,37.372634],
      [-121.966657,37.372608],
      [-121.966653,37.372583],
      [-121.966650,37.372556],
      [-121.966647,37.372528],
      [-121.966646,37.372499],
      [-121.966645,37.372469],
      [-121.966645,37.372454]
     ]
    ]
   }
  },
  {
   "type"      : "Feature",
   "properties": null,
   "geometry"  : {
    "type"       : "Polygon",
    "coordinates": [
     [
      [-121.964673,37.371747],
      [-121.964673,37.371747],
      [-121.964278,37.371747],
      [-121.964278,37.372611],
      [-121.964278,37.372628],
      [-121.964279,37.372663],
      [-121.964282,37.372697],
      [-121.964285,37.372729],
      [-121.964290,37.372761],
      [-121.964295,37.372791],
      [-121.964302,37.372820],
      [-121.964310,37.372847],
      [-121.964319,37.372874],
      [-121.964330,37.372900],
      [-121.964341,37.372924],
      [-121.964354,37.372947],
      [-121.964367,37.372969],
      [-121.964382,37.372990],
      [-121.964398,37.373009],
      [-121.964415,37.373027],
      [-121.964424,37.373036],
      [-121.964433,37.373045],
      [-121.964453,37.373061],
      [-121.964473,37.373076],
      [-121.964495,37.373090],
      [-121.964518,37.373103],
      [-121.964542,37.373115],
      [-121.964567,37.373125],
      [-121.964593,37.373135],
      [-121.964621,37.373144],
      [-121.964649,37.373151],
      [-121.964679,37.373158],
      [-121.964710,37.373163],
      [-121.964742,37.373167],
      [-121.964775,37.373171],
      [-121.964809,37.373173],
      [-121.964844,37.373174],
      [-121.964862,37.373174],
      [-121.964888,37.373174],
      [-121.964939,37.373172],
      [-121.964986,37.373167],
      [-121.965032,37.373160],
      [-121.965075,37.373152],
      [-121.965105,37.373143],
      [-121.965125,37.373137],
      [-121.965144,37.373131],
      [-121.965162,37.373124],
      [-121.965180,37.373116],
      [-121.965198,37.373107],
      [-121.965206,37.373103],
      [-121.965222,37.373094],
      [-121.965255,37.373073],
      [-121.965286,37.373050],
      [-121.965316,37.373025],
      [-121.965346,37.372996],
      [-121.965374,37.372965],
      [-121.965401,37.372931],
      [-121.965427,37.372895],
      [-121.965440,37.372875],
      [-121.965447,37.372875],
      [-121.965447,37.372894],
      [-121.965449,37.372944],
      [-121.965454,37.373011],
      [-121.965461,37.373096],
      [-121.965466,37.373145],
      [-121.965840,37.373145],
      [-121.965836,37.373105],
      [-121.965830,37.373025],
      [-121.965827,37.372945],
      [-121.965825,37.372864],
      [-121.965824,37.372823],
      [-121.965824,37.371747],
      [-121.965431,37.371747],
      [-121.965431,37.372487],
      [-121.965431,37.372499],
      [-121.965430,37.372524],
      [-121.965429,37.372548],
      [-121.965426,37.372571],
      [-121.965423,37.372594],
      [-121.965418,37.372616],
      [-121.965413,37.372638],
      [-121.965407,37.372658],
      [-121.965400,37.372679],
      [-121.965393,37.372698],
      [-121.965384,37.372717],
      [-121.965375,37.372735],
      [-121.965364,37.372752],
      [-121.965353,37.372769],
      [-121.965341,37.372785],
      [-121.965328,37.372801],
      [-121.965321,37.372808],
      [-121.965314,37.372816],
      [-121.965300,37.372830],
      [-121.965285,37.372843],
      [-121.965269,37.372855],
      [-121.965253,37.372866],
      [-121.965236,37.372876],
      [-121.965218,37.372885],
      [-121.965200,37.372894],
      [-121.965181,37.372901],
      [-121.965161,37.372908],
      [-121.965141,37.372913],
      [-121.965120,37.372918],
      [-121.965098,37.372921],
      [-121.965076,37.372924],
      [-121.965053,37.372926],
      [-121.965030,37.372927],
      [-121.965018,37.372927],
      [-121.965007,37.372927],
      [-121.964985,37.372926],
      [-121.964964,37.372925],
      [-121.964944,37.372923],
      [-121.964925,37.372920],
      [-121.964906,37.372916],
      [-121.964888,37.372912],
      [-121.964871,37.372907],
      [-121.964855,37.372901],
      [-121.964839,37.372894],
      [-121.964824,37.372887],
      [-121.964810,37.372879],
      [-121.964797,37.372870],
      [-121.964784,37.372861],
      [-121.964772,37.372851],
      [-121.964761,37.372840],
      [-121.964756,37.372834],
      [-121.964751,37.372828],
      [-121.964741,37.372816],
      [-121.964732,37.372802],
      [-121.964723,37.372788],
      [-121.964716,37.372773],
      [-121.964708,37.372756],
      [-121.964702,37.372739],
      [-121.964696,37.372721],
      [-121.964689,37.372692],
      [-121.964681,37.372650],
      [-121.964676,37.372604],
      [-121.964673,37.372555],
      [-121.964673,37.372529],
      [-121.964673,37.371747]
     ]
    ]
   }
  }
 ]
}
        res.features.map(function (item, index) {
            item.properties = {
                name:''
            }
        })
        echarts.registerMap("mapCity", res);
        map.dispose()
        reset()

    })(echarts)
    </script>












